<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>تواصل معنا — GamesHub</title>
			<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
			<script src="https://cdn.tailwindcss.com"></script>
			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
			<link rel="stylesheet" href="css/index.css">
</head>
<body class="bg-bg-dark min-h-screen relative overflow-x-hidden">
	<!-- Enhanced animated background -->
	<div class="fixed inset-0 z-0">
		<div class="absolute inset-0 bg-gradient-to-br from-bg-dark via-slate-900 to-bg-dark"></div>
		<div class="absolute inset-0 bg-gradient-to-tr from-neon-purple/5 via-transparent to-neon-blue/5"></div>
		<div class="absolute top-1/4 left-1/4 w-96 h-96 bg-neon-blue/10 rounded-full blur-3xl animate-pulse"></div>
		<div class="absolute bottom-1/4 right-1/4 w-80 h-80 bg-neon-purple/10 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
		<div class="absolute top-3/4 left-1/2 w-64 h-64 bg-neon-green/8 rounded-full blur-3xl animate-pulse" style="animation-delay: 4s;"></div>
	</div>
	
	<!-- Moving dots effect -->
	<div class="fixed inset-0 z-0 overflow-hidden">
		<div class="absolute w-2 h-2 bg-neon-blue/30 rounded-full animate-bounce" style="top: 20%; left: 10%; animation-delay: 0s; animation-duration: 3s;"></div>
		<div class="absolute w-1 h-1 bg-neon-purple/40 rounded-full animate-bounce" style="top: 60%; left: 80%; animation-delay: 1s; animation-duration: 4s;"></div>
		<div class="absolute w-1.5 h-1.5 bg-neon-green/35 rounded-full animate-bounce" style="top: 80%; left: 20%; animation-delay: 2s; animation-duration: 5s;"></div>
		<div class="absolute w-1 h-1 bg-neon-blue/25 rounded-full animate-bounce" style="top: 30%; left: 70%; animation-delay: 3s; animation-duration: 6s;"></div>
	</div>


	<!-- Toast message -->
	<div id="toast" class="toast">ميزة قريبا! ✨</div>
	<!-- Overlay (mobile) -->
	<div id="overlay" class="fixed inset-0 bg-black bg-opacity-60 hidden z-40" onclick="closeSidebar()"></div>

	<div id="sidebar-container"></div>

<div class="min-h-screen md:mr-64 relative z-10 flex flex-col items-center justify-center p-4">
			<!-- Mobile topbar: fixed so hamburger is always visible on small screens -->
			<header class="fixed top-0 left-0 w-full bg-slate-900/80 backdrop-blur-md z-50 p-4 flex items-center justify-between md:hidden">
				<div class="flex items-center gap-3">
					<button class="p-2 rounded-lg border border-white/6 open-sidebar-btn"><i class="fa fa-bars text-xl"></i></button>
					<a href="#" class="text-xl font-bold">GamesHub</a>
				</div>
				<div class="flex items-center gap-3">
					<a href="login.html" class="px-3 py-2 rounded-lg border border-white/6" onclick="try{sessionStorage.setItem('post_auth_return', window.location.pathname+window.location.search+window.location.hash);}catch(e){}">تسجيل دخول</a>
				</div>
			</header>

	 <!-- Enhanced contact form container -->
	 <div class="w-full max-w-lg bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 mt-8 relative overflow-hidden">
	   <!-- Decorative elements -->
	   <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-neon-blue/20 to-transparent rounded-full blur-2xl"></div>
	   <div class="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-neon-purple/20 to-transparent rounded-full blur-2xl"></div>
	   
	   <div class="relative z-10">
	     <div class="text-center mb-8">
	       <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-neon-blue/20 to-neon-purple/20 rounded-2xl mb-4 border border-white/20">
	         <i class="fas fa-envelope text-2xl bg-gradient-to-r from-neon-blue to-neon-purple bg-clip-text text-transparent"></i>
	       </div>
	       <h1 class="text-3xl font-bold mb-2 bg-gradient-to-r from-white via-neon-blue to-neon-purple bg-clip-text text-transparent">تواصل معنا</h1>
	       <p class="text-white/70 text-sm">نحن هنا لمساعدتك في أي وقت</p>
	     </div>
	     <form id="contact-form" class="space-y-6" autocomplete="off" novalidate>
		       <div class="space-y-2">
			       <label for="name" class="flex items-center gap-2 text-sm font-medium text-white/90 mb-2">
			         <i class="fas fa-user text-neon-blue"></i>
			         الاسم الكامل
			       </label>
			       <input type="text" id="name" name="name" required minlength="2" maxlength="30" 
			              class="w-full p-4 rounded-xl bg-white/5 backdrop-blur-sm text-white border border-white/20 focus:outline-none focus:border-neon-blue focus:ring-2 focus:ring-neon-blue/20 text-base min-h-[52px] transition-all duration-300 hover:bg-white/10" 
			              placeholder="أدخل اسمك الكامل">
		       </div>
		       <div class="space-y-2">
			       <label for="email" class="flex items-center gap-2 text-sm font-medium text-white/90 mb-2">
			         <i class="fas fa-envelope text-neon-purple"></i>
			         البريد الإلكتروني
			       </label>
			       <input type="email" id="email" name="email" required 
			              class="w-full p-4 rounded-xl bg-white/5 backdrop-blur-sm text-white border border-white/20 focus:outline-none focus:border-neon-purple focus:ring-2 focus:ring-neon-purple/20 text-base min-h-[52px] transition-all duration-300 hover:bg-white/10" 
			              placeholder="example@email.com">
		       </div>
		       <div class="space-y-2">
			       <label for="message" class="flex items-center gap-2 text-sm font-medium text-white/90 mb-2">
			         <i class="fas fa-comment-dots text-neon-green"></i>
			         رسالتك
			       </label>
			       <textarea id="message" name="message" required minlength="10" maxlength="500" rows="5" 
			                class="w-full p-4 rounded-xl bg-white/5 backdrop-blur-sm text-white border border-white/20 focus:outline-none focus:border-neon-green focus:ring-2 focus:ring-neon-green/20 text-base min-h-[120px] resize-y transition-all duration-300 hover:bg-white/10" 
			                placeholder="اكتب رسالتك هنا... سنكون سعداء لمساعدتك"></textarea>
		       </div>
		       <button type="submit" class="w-full bg-gradient-to-r from-neon-blue via-neon-purple to-neon-green p-4 rounded-xl text-white font-bold text-lg transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-neon-blue/25 focus:outline-none focus:ring-2 focus:ring-neon-blue/50 relative overflow-hidden group">
		         <span class="relative z-10 flex items-center justify-center gap-2">
		           <i class="fas fa-paper-plane"></i>
		           إرسال الرسالة
		         </span>
		         <div class="absolute inset-0 bg-gradient-to-r from-neon-green via-neon-blue to-neon-purple opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
		       </button>
	       </form>
	       
	       <!-- Enhanced success and error messages -->
	       <div id="contact-success" class="hidden mt-6 p-4 bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30 rounded-xl text-center backdrop-blur-sm">
	         <div class="flex items-center justify-center gap-2 text-green-400 font-semibold">
	           <i class="fas fa-check-circle"></i>
	           <span>تم إرسال رسالتك بنجاح! سنرد عليك قريبًا.</span>
	         </div>
	       </div>
	       <div id="contact-error" class="hidden mt-6 p-4 bg-gradient-to-r from-red-500/20 to-rose-500/20 border border-red-500/30 rounded-xl text-center backdrop-blur-sm">
	         <div class="flex items-center justify-center gap-2 text-red-400 font-semibold">
	           <i class="fas fa-exclamation-triangle"></i>
	           <span id="error-text"></span>
	         </div>
	       </div>
	     </div>
   </div>
</div>

	<script>
	// تعقيم نصوص الإدخال (بسيط على مستوى الواجهة)
	function sanitizeInput(str) {
		return str.replace(/[<>]/g, '');
	}

	// التحقق من صحة النموذج وإرسال البيانات (موحّد في مُستمع واحد)
	document.getElementById('contact-form').addEventListener('submit', function(e){
		e.preventDefault();
		const name = sanitizeInput(document.getElementById('name').value.trim());
		const email = sanitizeInput(document.getElementById('email').value.trim());
		const message = sanitizeInput(document.getElementById('message').value.trim());
		const errorDiv = document.getElementById('contact-error');
		const successDiv = document.getElementById('contact-success');
		errorDiv.classList.add('hidden');
		successDiv.classList.add('hidden');

		// تحقق من صحة البيانات
		if(name.length < 2 || name.length > 30){
			document.getElementById('error-text').textContent = 'يرجى إدخال اسم صحيح (2-30 حرف).';
			errorDiv.classList.remove('hidden');
			return;
		}
		if(!/^\S+@\S+\.\S+$/.test(email)){
			document.getElementById('error-text').textContent = 'يرجى إدخال بريد إلكتروني صحيح.';
			errorDiv.classList.remove('hidden');
			return;
		}
		if(message.length < 10){
			document.getElementById('error-text').textContent = 'يرجى كتابة رسالة لا تقل عن 10 أحرف.';
			errorDiv.classList.remove('hidden');
			return;
		}

		// إرسال البيانات للخادم - single POST
		const form = e.target;
		const formData = new FormData();
		formData.append('name', name);
		formData.append('email', email);
		formData.append('message', message);

		// تعطيل الزر لمنع الإرسال المتكرر
		const btn = form.querySelector('button[type="submit"]');
		if (btn) { btn.disabled = true; btn.classList.add('opacity-60'); }

	fetch('api/contact.php', {
			method: 'POST',
			body: formData,
			credentials: 'include'
		})
		.then(res => res.json())
		.then(data => {
			if(data && data.success){
				successDiv.classList.remove('hidden');
				form.reset();
			} else {
				document.getElementById('error-text').textContent = data && data.error ? data.error : 'فشل إرسال الرسالة';
				errorDiv.classList.remove('hidden');
			}
		})
		.catch(()=>{
			document.getElementById('error-text').textContent = 'خطأ في الاتصال بالخادم';
			errorDiv.classList.remove('hidden');
		})
		.finally(()=>{ if (btn) { btn.disabled = false; btn.classList.remove('opacity-60'); } });
	});
	</script>
		<script src="js/hinex.js"></script>
		<script src="js/sidebar.js"></script>
		<script src="js/online-status.js"></script>
</body>
</html>
